<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>hw1 choose person</title>
<style>
* {
  font-size:1em;
}

.cWide {
  width:70%;
}

.cNarrow {
  width:4em;
}

span {
  white-space: nowrap;
}
.cPanel {
  border:1px solid gray;
  padding:1em;
  margin:1em;
  display:inline-block;
  white-space: nowrap;
}
</style>
</head>
<body>
  <fieldset><legend>Add people</legend><input id='IdNewNames' class='cWide'> <button id='IdAddPeopleButton'>Add</button></fieldset>
  <ul id='IdPeopleList'></ul>

  <fieldset><legend>Get random people</legend>
    <input id='IdGroupSize' type="Number" class='cNarrow' min="2">
    <button id='IdGroupSizeButton'>Get Random groups</button>
    <button id='IdResetButton'>Reset</button></fieldset>
  <script>
  'use strict'
function g() {
  return document.getElementById(arguments[0])
}

function doAddPeople(e) {
  console.log('clicked' + e)
  debugger
  var x =g('IdNewNames')
  var newNames = g('IdNewNames').value
  newNames = newNames.trim()
  if (newNames === "") {
    g('IdNewNames').focus()
    return
  }
  var names;
  if (newNames.indexOf(",") !== -1) {
    names = parseNames(newNames)
  } else {
    names = [newNames]
  }

  var boxes = document.getElementsByClassName('cBox')
  if (boxes.length > 1) {
    boxes[0].remove()
  }
}

// Wait until the DOM has finished loading
// then initialize things such as event handlers
document.addEventListener('DOMContentLoaded', init)
var addPeopleRef
var newNamesRef
var groupSizeRef

function init() {
  addPeopleRef = g("IdAddPeopleButton")
  newNamesRef = g("IdNewNames")
  groupSizeRef =  g("IdGroupSizeButton")

  addPeopleRef.setAttribute("disabled", "true");
  addPeopleRef.addEventListener('click', doAddPeople)
  newNamesRef.addEventListener('keyup', updateAddButton)
  groupSizeRef.addEventListener('keyup', updateAddButton)
}

function updateAddButton(e) {
  if ((newNamesRef.value).trim() !== "") {
    addPeopleRef.removeAttribute("disabled")
    //console.log('add people ref should be false' )
  } else {
    addPeopleRef.setAttribute("disabled", "true");
    //console.log('add people ref should be true!!' )
  }
  //console.log('newNamesRef.value:' + newNamesRef.value + ' (newNamesRef.value).trim():' + (newNamesRef.value).trim() )
}

function parseNames() {
  return nameSet = (arguments[0].split(',')).trim()
}
  </script>
</body>
</html>
